<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.game.mybatis.dao.Game_InfoMapper" >
  <resultMap id="GameInfoResult" type="com.game.mybatis.model.Game_Info" >
    <id column="game_id" property="gameId" jdbcType="INTEGER" />
    <result column="game_name" property="gameName" jdbcType="VARCHAR" />
    <result column="UserCount" property="usercount" jdbcType="INTEGER" />
    <result column="game_type" property="gameType" jdbcType="INTEGER" />
    <result column="isUsed" property="isUsed" jdbcType="INTEGER" />
    <association property="playMap" column="play_map_id" javaType="Map_Info"
    		resultMap="MapInfoResult">
    </association>
    <association property="currentDialog" column="current_dialog_id" javaType="Dialog_Info"
    		resultMap="DialogInfoResult">
    </association>
    <association property="battle_Info" column="battle_info_id" javaType="Battle_Info"
    		resultMap="BattleInfoResult">
    </association>
    <association property="creator" column="creator_id" javaType="User"
    		resultMap="CreatorResult">
    </association>
    <collection property="dialogsList" ofType="Dialog_Info" 
    	resultMap="DialogsListResult">
    </collection>
    <collection property="usersList" ofType="User" 
    	resultMap="UserListResult">
    </collection>
  </resultMap>
  
 
  <resultMap id="MapInfoResult" type="com.game.mybatis.model.Map_Info">
  	<id column="map_id" property="mapId"></id>
  </resultMap>
  <resultMap id="UserListResult" type="com.game.mybatis.model.User">
  	<id column="user_id" property="user_id"></id>
  	<result column="username" property="username"></result>
  </resultMap>
  <resultMap id="DialogInfoResult" type="com.game.mybatis.model.Dialog_Info">
  	<id column="dialog_id" property="dialog_id"></id>
  </resultMap>
  <resultMap id="DialogsListResult" type="com.game.mybatis.model.Dialog_Info">
  	<id column="dialog_id" property="dialog_id"></id>
  </resultMap>
  <resultMap id="BattleInfoResult" type="com.game.mybatis.model.Battle_Info">
  	<id column="dialog_id" property="dialog_id"></id>
  </resultMap>
  <resultMap id="CreatorResult" type="com.game.mybatis.model.User">
  	<id column="user_id" property="user_id"></id>
  </resultMap>
  <select id="selectByPrimaryKey" resultMap="GameInfoResult" parameterType="java.lang.Integer" >
    select t.*, u.* from game_info t , user u where t.game_id = #{id,jdbcType=INTEGER} and t.game_id = u.game_info_id
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    delete from game_info
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.game.mybatis.model.Game_Info" >
    insert into game_info (id, UserCount, game_type, 
      play_map_id)
    values (#{id,jdbcType=INTEGER}, #{usercount,jdbcType=INTEGER}, #{gameType,jdbcType=INTEGER}, 
      #{playMapId,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="com.game.mybatis.model.Game_Info" >
    insert into game_info
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="usercount != null" >
        UserCount,
      </if>
      <if test="gameType != null" >
        game_type,
      </if>
      <if test="playMapId != null" >
        play_map_id,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="usercount != null" >
        #{usercount,jdbcType=INTEGER},
      </if>
      <if test="gameType != null" >
        #{gameType,jdbcType=INTEGER},
      </if>
      <if test="playMapId != null" >
        #{playMapId,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.game.mybatis.model.Game_Info" >
    update game_info
    <set >
      <if test="usercount != null" >
        UserCount = #{usercount,jdbcType=INTEGER},
      </if>
      <if test="gameType != null" >
        game_type = #{gameType,jdbcType=INTEGER},
      </if>
      <if test="playMapId != null" >
        play_map_id = #{playMapId,jdbcType=INTEGER},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.game.mybatis.model.Game_Info" >
    update game_info
    set UserCount = #{usercount,jdbcType=INTEGER},
      game_type = #{gameType,jdbcType=INTEGER},
      play_map_id = #{playMapId,jdbcType=INTEGER}
    where id = #{id,jdbcType=INTEGER}
  </update>
</mapper>